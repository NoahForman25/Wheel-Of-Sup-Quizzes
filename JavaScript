// List of phrases
const phrases = [
    "Ian cannot beat an anaconda",
    "Teamwork makes the dream work",
    "Coffee fuels our creativity daily",
    "Together we achieve more success",
    "The early bird gets the worm"
];

let currentPhrase = "";
let score = 0;
let maxGuesses = 0;
let guesses = [];

// Initialize the screen
function initializeGame() {
    currentPhrase = phrases[Math.floor(Math.random() * phrases.length)];
    score = 0;

    // Get max guesses from the input field
    const quizScoreInput = document.getElementById("score-input").value;
    maxGuesses = parseInt(quizScoreInput, 10) || 0; // Default to 0 if invalid input
    guesses = [];
    
    document.getElementById("masked-phrase").innerText = maskPhrase(currentPhrase);
    document.getElementById("score").innerText = score;
    document.getElementById("message").innerText = ""; 
}

// Mask the phrase
function maskPhrase(phrase) {
    return phrase.replace(/[a-zA-Z]/g, "_");
}

// Handle guesses
function handleGuess() {
    const guessInput = document.getElementById("guess-input");
    const guessedLetter = guessInput.value.toLowerCase().trim();
    guessInput.value = ""; // Clear input after guessing

    if (guesses.includes(guessedLetter)) {
        alert("You already guessed that letter!");
        return;
    }

    guesses.push(guessedLetter); // Keep track of guessed letters

    if (currentPhrase.toLowerCase().includes(guessedLetter)) {
        score++; 
    } else {
        maxGuesses--; // Decrease max guesses
        if (maxGuesses <= 0) {
            document.getElementById("message").innerText = "Game Over! The phrase was: " + currentPhrase;
            document.getElementById("masked-phrase").innerText = currentPhrase; // Show the phrase
            return;
        }
    }

    document.getElementById("score").innerText = score;
    document.getElementById("masked-phrase").innerText = getMaskedPhrase();

    // Check for complete phrase guessed
    if (isPhraseGuessed()) {
        document.getElementById("message").innerText = "Congratulations! You guessed the phrase!";
    } else {
        document.getElementById("message").innerText = `Guesses left: ${maxGuesses}`; // Show remaining guesses
    }
}

// Get the masked phrase based on guessed letters
function getMaskedPhrase() {
    return currentPhrase.split('').map(letter => {
        return guesses.includes(letter.toLowerCase()) ? letter : "_";
    }).join('');
}

// Check if the entire phrase has been guessed
function isPhraseGuessed() {
    return currentPhrase.split('').every(letter => guesses.includes(letter.toLowerCase()) || letter === " ");
}

// Reset the game
function resetGame() {
    document.getElementById("score-input").value = ""; // Clear the input field
    initializeGame(); // Re-initialize the game
}

// Initialize on load
initializeGame();
