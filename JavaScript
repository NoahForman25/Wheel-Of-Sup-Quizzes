// Current Player Management
let currentPlayer = null;

// Login Function
function login() {
    const nicknameInput = document.getElementById('nickname-input');
    const nickname = nicknameInput.value.trim();

    // Validate nickname
    if (nickname.length < 3) {
        alert('Nickname must be at least 3 characters long');
        return;
    }

    // Set current player
    currentPlayer = {
        nickname: nickname,
        score: 0
    };

    // Update player name on game screen
    document.getElementById('player-name').textContent = nickname;

    // Switch screens
    document.getElementById('login-screen').classList.remove('active');
    document.getElementById('game-screen').classList.add('active');
}

// Logout Function
function logout() {
    // Reset current player
    currentPlayer = null;

    // Clear nickname input
    document.getElementById('nickname-input').value = '';

    // Switch screens
    document.getElementById('game-screen').classList.remove('active');
    document.getElementById('login-screen').classList.add('active');

    // Reset game state
    resetGame();
}

// List of phrases
const phrases = [
    "Ian cannot beat an anaconda",
    "Teamwork makes the dream work",
    "Coffee fuels our creativity daily",
    "Together we achieve more success",
    "The early bird gets the worm"
];

let currentPhrase = "";
let score = 0;
let maxGuesses = 0;
let guesses = [];

// Wait for the DOM to be fully loaded
document.addEventListener('DOMContentLoaded', () => {
    // Add event listeners after DOM is loaded
    document.getElementById('start-game-button').addEventListener('click', startGame);
    document.getElementById('guess-button').addEventListener('click', handleGuess);
    document.getElementById('reset-button').addEventListener('click', resetGame);

    // Initialize the game when page loads
    initializeGame();
});

// Start the game with the specified score
function startGame() {
    const quizScoreInput = document.getElementById("score-input");
    const scoreValue = parseInt(quizScoreInput.value, 10);

    if (isNaN(scoreValue) || scoreValue <= 0) {
        alert("Please enter a valid quiz score!");
        return;
    }

    maxGuesses = scoreValue;
    initializeGame();
}

// Initialize the screen
function initializeGame() {
    currentPhrase = phrases[Math.floor(Math.random() * phrases.length)];
    score = 0;
    guesses = [];
    
    document.getElementById("masked-phrase").innerText = maskPhrase(currentPhrase);
    document.getElementById("score").innerText = score;
    document.getElementById("guesses-left").innerText = maxGuesses;
    document.getElementById("message").innerText = `You have ${maxGuesses} guesses`; 
}

// Rest of your original game logic remains the same...
// (handleGuess, maskPhrase, getMaskedPhrase, isPhraseGuessed, etc.)
