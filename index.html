<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Phrase Guessing Game</title>
    <style>
        body { 
            font-family: Arial; 
            text-align: center; 
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            height: 100vh;
            background-color: #f0f0f0;
        }
        .screen {
            display: none;
            background-color: white;
            padding: 20px;
            border-radius: 10px;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        #login-screen {
            display: flex;
            flex-direction: column;
            align-items: center;
        }
        input, button {
            margin: 10px;
            padding: 10px;
            width: 200px;
        }
        #game-screen {
            max-width: 400px;
        }
    </style>
</head>
<body>
    <!-- Login Screen -->
    <div id="login-screen" class="screen">
        <h1>Phrase Guessing Game</h1>
        <input 
            id="username-input" 
            type="text" 
            placeholder="Enter your nickname"
            maxlength="15"
        >
        <button onclick="login()">Start Game</button>
    </div>

    <!-- Game Screen -->
    <div id="game-screen" class="screen">
        <h1>Welcome, <span id="player-name"></span></h1>
        
        <div>
            <input id="score-input" type="number" placeholder="Enter max guesses">
            <button onclick="startGame()">Start Game</button>
        </div>

        <div>
            Phrase: <span id="masked-phrase">______</span>
        </div>

        <div>
            <input id="guess-input" type="text" placeholder="Enter your guess">
            <button onclick="makeGuess()">Guess</button>
        </div>

        <div>
            Guesses Left: <span id="guesses-left">0</span>
        </div>

        <div id="message"></div>

        <button onclick="resetGame()">Reset Game</button>
        <button onclick="logout()">Logout</button>
    </div>

    <!-- Leaderboard Screen (Placeholder) -->
    <div id="leaderboard-screen" class="screen">
        <h1>Leaderboard</h1>
        <table id="leaderboard-table">
            <thead>
                <tr>
                    <th>Rank</th>
                    <th>Player</th>
                    <th>Score</th>
                </tr>
            </thead>
            <tbody id="leaderboard-body">
                <!-- Leaderboard entries will be populated here -->
            </tbody>
        </table>
        <button onclick="returnToLogin()">Back to Login</button>
    </div>

    <script>
        // Game State and User Management
        let currentUser = null;
        let leaderboard = [];

        // Screen Management
        function showScreen(screenId) {
            // Hide all screens
            document.getElementById('login-screen').style.display = 'none';
            document.getElementById('game-screen').style.display = 'none';
            document.getElementById('leaderboard-screen').style.display = 'none';
            
            // Show selected screen
            document.getElementById(screenId).style.display = 'flex';
        }

        // Login Function
        function login() {
            const usernameInput = document.getElementById('username-input');
            const username = usernameInput.value.trim();

            if (username.length < 3) {
                alert('Nickname must be at least 3 characters long');
                return;
            }

            // Set current user
            currentUser = {
                name: username,
                score: 0,
                gamesPlayed: 0
            };

            // Update player name on game screen
            document.getElementById('player-name').textContent = username;

            // Show game screen
            showScreen('game-screen');
        }

        // Logout Function
        function logout() {
            // Reset current user
            currentUser = null;

            // Clear inputs
            document.getElementById('username-input').value = '';
            document.getElementById('score-input').value = '';
            document.getElementById('guess-input').value = '';

            // Show login screen
            showScreen('login-screen');
        }

        // Leaderboard Management
        function updateLeaderboard() {
            if (currentUser) {
                // Add current user's score to leaderboard
                leaderboard.push({
                    name: currentUser.name,
                    score: currentUser.score
                });

                // Sort leaderboard by score (descending)
                leaderboard.sort((a, b) => b.score - a.score);

                // Limit leaderboard to top 10
                leaderboard = leaderboard.slice(0, 10);

                // Populate leaderboard table
                const leaderboardBody = document.getElementById('leaderboard-body');
                leaderboardBody.innerHTML = ''; // Clear existing entries

                leaderboard.forEach((entry, index) => {
                    const row = document.createElement('tr');
                    row.innerHTML = `
                        <td>${index + 1}</td>
                        <td>${entry.name}</td>
                        <td>${entry.score}</td>
                    `;
                    leaderboardBody.appendChild(row);
                });
            }
        }

        // Existing game logic remains the same as in previous implementation
        // ... (paste previous game functions here)

        // Modify makeGuess() to update user score
        function makeGuess() {
            // Existing makeGuess logic...

            // When player wins or reaches certain conditions
            if (gameWon) {
                currentUser.score += 10; // Example scoring
                currentUser.gamesPlayed++;
                updateLeaderboard();
            }
        }

        function returnToLogin() {
            showScreen('login-screen');
        }

        // Start with login screen
        showScreen('login-screen');
    </script>
</body>
</html>
